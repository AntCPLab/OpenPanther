[2024-08-19 18:50:33.665] [info] [sanns_demo.cc:260] Total bin number (batch size of argmin): 1252 , Max bin size: 120
[2024-08-19 18:50:33.665] [info] [sanns_demo.cc:276] Batch query size: 113, Cluster size: , Element size (coeff size): 90608
[2024-08-19 18:50:35.902] [info] [state.h:150] CHEETAH: Uses yacl_ferret OT
[2024-08-19 18:50:36.667] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:37.821] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:38.601] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:39.174] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:39.942] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:40.498] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:41.273] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:41.847] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:42.624] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:43.192] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:43.971] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:44.540] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:45.321] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:45.888] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:46.664] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:47.231] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:48.008] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:48.572] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:49.350] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:49.902] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:50.684] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:51.241] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:52.018] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:52.572] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:53.385] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:53.941] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:54.722] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:55.299] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:56.082] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:56.636] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:57.410] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:57.961] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:58.732] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:50:59.284] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:00.056] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:00.608] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:01.381] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:01.937] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:02.711] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:03.280] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:04.049] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:04.619] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:05.394] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:05.959] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:06.736] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:07.295] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:08.090] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:08.660] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:09.445] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:09.996] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:10.778] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:11.330] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:12.126] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:12.675] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:13.469] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:14.024] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:14.812] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:15.420] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:16.189] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:16.762] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:17.556] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:18.112] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:18.901] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:19.458] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:20.234] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:20.810] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:21.584] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:22.135] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:22.909] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:23.510] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:24.281] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:24.847] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:25.624] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:26.199] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:26.997] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:27.569] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:28.358] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:28.930] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:29.713] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:30.282] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:31.108] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:31.666] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:32.462] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:33.018] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:33.833] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:34.392] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:35.195] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:35.754] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:36.555] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:37.119] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:37.901] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:38.451] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:39.239] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:39.787] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:40.575] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:41.123] [info] [yacl_ote_adapter.cc:202] Doing Ferret-OT Bootstrap now!
[2024-08-19 18:51:41.564] [info] [sanns_demo.cc:174] DB: element number:90608 element size:2600
[2024-08-19 18:51:46.106] [info] [thread_pool.cc:30] Create a fixed thread pool with size 63
[2024-08-19 18:51:46.114] [info] [seal_mpir.cc:43] Element_number:90608
[2024-08-19 18:51:46.118] [info] [seal_mpir.h:98] N:4096 Max bin size:1648 Element size:2600
connected
[2024-08-19 18:52:01.482] [info] [dist_cmp.cc:195] Recv time: 6.865368 ms
[2024-08-19 18:52:01.590] [info] [dist_cmp.cc:269] Prepoint time: 108.000307
[2024-08-19 18:52:01.590] [info] [dist_cmp.cc:281] Distance NTT time: 108.394921 ms
[2024-08-19 18:52:01.619] [info] [dist_cmp.cc:306] H2A Time: 20.009346 ms
[2024-08-19 18:52:01.623] [info] [dist_cmp.cc:314] Distance Compute Time : 141.310778 ms
[2024-08-19 18:52:01.623] [info] [sanns_demo.cc:469] Distance cmp time: 515.211269 ms
[2024-08-19 18:52:01.623] [info] [sanns_demo.cc:470] Distance server sent actions: 45, Distance comm: 1.3264684677124023 MB
[2024-08-19 18:52:04.657] [info] [sanns_demo.cc:486] Batch number: 1252, element number: 120, Argmax server sent actions: 960, Argmin comm: 1.7762870788574219 MB
[2024-08-19 18:52:04.657] [info] [sanns_demo.cc:495] Argmin cmp time: 3033.64104 ms
[2024-08-19 18:52:06.216] [info] [sanns_demo.cc:510] Gc_Naive_topk cmp time: 1559.053286 ms
[2024-08-19 18:52:06.216] [info] [sanns_demo.cc:513] Gc_Naive_topk cmp comm: 19.670512199401855 MB
[2024-08-19 18:52:07.374] [info] [seal_mpir.cc:214] PIR: Recv time: 1158.390104 ms
[2024-08-19 18:52:07.374] [info] [seal_mpir.cc:215] PIR: Query recv comm: 28221.990234375 KB
[2024-08-19 18:52:08.292] [info] [seal_mpir.cc:248] PIR: Compute time: 904.848994 ms
[2024-08-19 18:52:08.302] [info] [seal_mpir.cc:266] PIR: Transfer to Protobuffer: 10.074728 ms
[2024-08-19 18:52:08.309] [info] [seal_mpir.cc:279] PIR: Send time: 7.746244 ms
[2024-08-19 18:52:08.309] [info] [seal_mpir.cc:280] PIR: Query sent comm: 16030.3037109375 KB
[2024-08-19 18:52:08.309] [info] [seal_mpir.cc:285] PIR: Answer generate: 2093.391117 ms
[2024-08-19 18:52:08.312] [info] [sanns_demo.cc:520] PIR server response comm: 15.654593467712402 MB
[2024-08-19 18:52:08.312] [info] [sanns_demo.cc:524] PIR cmp time: 2095.578807 ms
[2024-08-19 18:52:09.442] [info] [dist_cmp.cc:216] Distance NTT time: 2.488227 ms
[2024-08-19 18:52:09.445] [info] [dist_cmp.cc:240] H2A Time: 0.968272 ms
[2024-08-19 18:52:09.445] [info] [dist_cmp.cc:249] Distance Compute Time : 5.081736 ms
[2024-08-19 18:52:09.445] [info] [sanns_demo.cc:538] Point_distance comm: 0.05894660949707031 MB
[2024-08-19 18:52:09.445] [info] [sanns_demo.cc:542] Point_distance time: 1133.385312 ms
[2024-08-19 18:52:11.055] [info] [sanns_demo.cc:556] End_topk_3550-10 time: 1534.670287 ms
[2024-08-19 18:52:11.055] [info] [sanns_demo.cc:560] End_topk_3550-10 comm: 35.31085968017578 MB
[2024-08-19 18:52:11.055] [info] [sanns_demo.cc:567] Total time: 9947.079279 ms
[2024-08-19 18:52:11.055] [info] [sanns_demo.cc:570] Total comm: 74.08080959320068 MB
[2024-08-19 18:52:11.635] [warning] [channel.h:163] Channel destructor is called before WaitLinkTaskFinish, try stop send thread
